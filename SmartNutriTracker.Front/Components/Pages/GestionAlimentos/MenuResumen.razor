@page "/menus/resumen/{MenuId:int}"
@using SmartNutriTracker.Shared.DTOs.Menus
@using SmartNutriTracker.Shared.DTOs.Alimentos
@inject HttpClient Http
@inject NavigationManager NavigationManager
@rendermode InteractiveServer

<div class="page-wrapper">
    <header class="app-header">
        <div class="header-band-main">
            <h1 class="header-title">
                <span class="icon-emoji">üìä</span> Resumen Nutricional
            </h1>
            <p class="header-subtitle">An√°lisis detallado del men√∫ diario</p>
        </div>
        <div class="header-band-bottom"></div>
    </header>

    <main class="resumen-container">
        @if (isLoading)
        {
            <div class="loading-section">
                <p class="loading-text">Cargando resumen nutricional...</p>
            </div>
        }
        else if (menu == null)
        {
            <div class="error-section">
                <p class="error-text">‚ùå No se encontr√≥ el men√∫ solicitado.</p>
                <a href="/menus" class="btn-back">Volver a Men√∫s</a>
            </div>
        }
        else
        {
            <div class="resumen-header">
                <div class="header-content">
                    <h2 class="resumen-title">üìä Resumen Nutricional Completo</h2>
                    <p class="resumen-fecha">üìÖ @menu.Fecha.ToString("dddd, dd 'de' MMMM 'de' yyyy")</p>
                </div>
                <a href="/menus" class="btn-back-header">‚Üê Volver a Men√∫s</a>
            </div>

            <div class="resumen-content">
                <!-- Tarjetas de Totales -->
                <div class="totales-grid">
                    <div class="total-card calorias-card">
                        <div class="card-icon">üî•</div>
                        <div class="card-content">
                            <span class="card-label">Calor√≠as Totales</span>
                            <span class="card-value">@totalCalorias</span>
                            <span class="card-unit">kcal</span>
                        </div>
                    </div>

                    <div class="total-card proteinas-card">
                        <div class="card-icon">ü•©</div>
                        <div class="card-content">
                            <span class="card-label">Prote√≠nas</span>
                            <span class="card-value">@totalProteinas.ToString("F1")</span>
                            <span class="card-unit">gramos</span>
                        </div>
                    </div>

                    <div class="total-card carbohidratos-card">
                        <div class="card-icon">üçû</div>
                        <div class="card-content">
                            <span class="card-label">Carbohidratos</span>
                            <span class="card-value">@totalCarbohidratos.ToString("F1")</span>
                            <span class="card-unit">gramos</span>
                        </div>
                    </div>

                    <div class="total-card grasas-card">
                        <div class="card-icon">ü•ë</div>
                        <div class="card-content">
                            <span class="card-label">Grasas</span>
                            <span class="card-value">@totalGrasas.ToString("F1")</span>
                            <span class="card-unit">gramos</span>
                        </div>
                    </div>
                </div>

                <!-- An√°lisis Nutricional -->
                <div class="analisis-section">
                    <h3 class="section-title">üîç An√°lisis Nutricional</h3>
                    <div class="analisis-cards">
                        <div class="analisis-card @GetClasificacionCalorias()">
                            <h4>Nivel Cal√≥rico</h4>
                            <p class="analisis-valor">@GetTextoNivelCalorias()</p>
                            <p class="analisis-descripcion">@GetDescripcionCalorias()</p>
                        </div>

                        <div class="analisis-card">
                            <h4>Alimentos en el Men√∫</h4>
                            <p class="analisis-valor">@cantidadAlimentos alimento@(cantidadAlimentos != 1 ? "s" : "")</p>
                            <p class="analisis-descripcion">
                                @if (cantidadAlimentos < 3)
                                {
                                    <span>‚ö†Ô∏è Considera agregar m√°s variedad al men√∫</span>
                                }
                                else if (cantidadAlimentos <= 5)
                                {
                                    <span>‚úÖ Buena variedad de alimentos</span>
                                }
                                else
                                {
                                    <span>üåü Excelente variedad nutricional</span>
                                }
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Detalles de Alimentos -->
                <div class="alimentos-section">
                    <h3 class="section-title">üçΩÔ∏è Detalle de Alimentos</h3>
                    <div class="table-wrapper">
                        <table class="alimentos-table">
                            <thead>
                                <tr>
                                    <th>Alimento</th>
                                    <th class="text-center">Calor√≠as</th>
                                    <th class="text-center">Prote√≠nas (g)</th>
                                    <th class="text-center">Carbohidratos (g)</th>
                                    <th class="text-center">Grasas (g)</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (menu.Alimentos != null && menu.Alimentos.Any())
                                {
                                    @foreach (var alimento in menu.Alimentos)
                                    {
                                        <tr>
                                            <td class="alimento-nombre">
                                                <span class="emoji-food">üç¥</span>
                                                <strong>@alimento.Nombre</strong>
                                            </td>
                                            <td class="text-center">@alimento.Calorias kcal</td>
                                            <td class="text-center">@alimento.Proteinas g</td>
                                            <td class="text-center">@alimento.Carbohidratos g</td>
                                            <td class="text-center">@alimento.Grasas g</td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Recomendaciones -->
                <div class="recomendaciones-section">
                    <h3 class="section-title">üí° Recomendaciones</h3>
                    <div class="recomendaciones-content">
                        @foreach (var recomendacion in GetRecomendaciones())
                        {
                            <div class="recomendacion-item">
                                <span class="recomendacion-icon">@recomendacion.Icon</span>
                                <p>@recomendacion.Texto</p>
                            </div>
                        }
                    </div>
                </div>
            </div>
        }
    </main>

    <footer class="app-footer">
        <div class="footer-band-top"></div>
        <div class="footer-band-main">
            <p>Creado con <span class="footer-icon">üå±</span> para mejorar tu bienestar.</p>
        </div>
    </footer>
</div>

@code {
    [Parameter] public int MenuId { get; set; }

    private MenuDTO? menu;
    private bool isLoading = true;

    private int totalCalorias => menu?.Alimentos?.Sum(a => a.Calorias) ?? 0;
    private decimal totalProteinas => menu?.Alimentos?.Sum(a => a.Proteinas) ?? 0;
    private decimal totalCarbohidratos => menu?.Alimentos?.Sum(a => a.Carbohidratos) ?? 0;
    private decimal totalGrasas => menu?.Alimentos?.Sum(a => a.Grasas) ?? 0;
    private int cantidadAlimentos => menu?.Alimentos?.Count ?? 0;

    private decimal totalCaloriasDecimal => totalCalorias;
    private decimal caloriasProteinas => totalProteinas * 4;
    private decimal caloriasCarbohidratos => totalCarbohidratos * 4;
    private decimal caloriasGrasas => totalGrasas * 9;
    private decimal totalCaloriasMacros => caloriasProteinas + caloriasCarbohidratos + caloriasGrasas;

    private decimal porcentajeProteinas => totalCaloriasMacros > 0 ? (caloriasProteinas / totalCaloriasMacros * 100) : 0;
    private decimal porcentajeCarbohidratos => totalCaloriasMacros > 0 ? (caloriasCarbohidratos / totalCaloriasMacros * 100) : 0;
    private decimal porcentajeGrasas => totalCaloriasMacros > 0 ? (caloriasGrasas / totalCaloriasMacros * 100) : 0;

    protected override async Task OnInitializedAsync()
    {
        await CargarMenu();
    }

    private async Task CargarMenu()
    {
        try
        {
            isLoading = true;
            menu = await Http.GetFromJsonAsync<MenuDTO>($"https://localhost:7187/api/menus/GetById/{MenuId}");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error al cargar men√∫: {ex.Message}");
            menu = null;
        }
        finally
        {
            isLoading = false;
        }
    }

    private string GetClasificacionCalorias()
    {
        if (totalCalorias < 1500) return "nivel-bajo";
        if (totalCalorias <= 2500) return "nivel-moderado";
        return "nivel-alto";
    }

    private string GetTextoNivelCalorias()
    {
        if (totalCalorias < 1500) return "Bajo";
        if (totalCalorias <= 2500) return "Moderado";
        return "Alto";
    }

    private string GetDescripcionCalorias()
    {
        if (totalCalorias < 1500) return "Este men√∫ tiene un aporte cal√≥rico bajo. Considera agregar m√°s alimentos energ√©ticos.";
        if (totalCalorias <= 2500) return "Este men√∫ tiene un aporte cal√≥rico adecuado para una alimentaci√≥n balanceada.";
        return "Este men√∫ tiene un aporte cal√≥rico alto. Verifica que sea apropiado para los objetivos nutricionales.";
    }

    private List<(string Icon, string Texto)> GetRecomendaciones()
    {
        var recomendaciones = new List<(string, string)>();

        // An√°lisis detallado de CALOR√çAS
        if (totalCalorias < 1200)
            recomendaciones.Add(("‚ö†Ô∏è", $"Este men√∫ aporta solo {totalCalorias} kcal, lo cual es muy bajo. El m√≠nimo recomendado para la mayor√≠a de personas es 1,200-1,500 kcal diarias. Considera agregar alimentos energ√©ticos como frutos secos, aceites saludables o cereales integrales."));
        else if (totalCalorias >= 1200 && totalCalorias < 1500)
            recomendaciones.Add(("‚ö°", $"Con {totalCalorias} kcal, este men√∫ est√° en el l√≠mite bajo para una alimentaci√≥n saludable. Es apropiado solo si buscas p√©rdida de peso supervisada. De lo contrario, considera incrementar las porciones."));
        else if (totalCalorias >= 1500 && totalCalorias <= 2000)
            recomendaciones.Add(("‚úÖ", $"Excelente. Este men√∫ aporta {totalCalorias} kcal, lo cual es ideal para mantener un peso saludable en la mayor√≠a de adultos con actividad moderada."));
        else if (totalCalorias > 2000 && totalCalorias <= 2500)
            recomendaciones.Add(("‚úÖ", $"Este men√∫ aporta {totalCalorias} kcal, apropiado para personas activas o con mayor requerimiento energ√©tico. Aseg√∫rate de que coincida con tus objetivos nutricionales."));
        else if (totalCalorias > 2500 && totalCalorias <= 3000)
            recomendaciones.Add(("‚ö†Ô∏è", $"Con {totalCalorias} kcal, este men√∫ es alto en energ√≠a. Es adecuado solo para atletas o personas con alta demanda f√≠sica. Si no es tu caso, considera reducir porciones o alimentos altos en grasas."));
        else
            recomendaciones.Add(("üö®", $"¬°Atenci√≥n! Este men√∫ aporta {totalCalorias} kcal, lo cual es excesivamente alto para la mayor√≠a de personas. Revisa las porciones y el tipo de alimentos incluidos para evitar un exceso cal√≥rico."));

        // An√°lisis detallado de PROTE√çNAS
        var proteinasGramos = totalProteinas;
        if (porcentajeProteinas < 10)
            recomendaciones.Add(("ü•©", $"Muy bajo en prote√≠nas ({proteinasGramos:F1}g, {porcentajeProteinas:F0}% de calor√≠as). Se recomienda al menos 15-20% de las calor√≠as totales. Agrega fuentes como: pollo, pescado, huevos, legumbres (frijoles, lentejas), tofu o queso bajo en grasa."));
        else if (porcentajeProteinas >= 10 && porcentajeProteinas < 15)
            recomendaciones.Add(("ü•©", $"Bajo en prote√≠nas ({proteinasGramos:F1}g, {porcentajeProteinas:F0}%). Lo ideal es 15-30% de las calor√≠as. Considera incrementar con: at√∫n, yogurt griego, pavo, almendras o quinoa."));
        else if (porcentajeProteinas >= 15 && porcentajeProteinas <= 30)
            recomendaciones.Add(("‚úÖ", $"Perfecto balance proteico: {proteinasGramos:F1}g ({porcentajeProteinas:F0}%). Este rango (15-30%) es ideal para reparaci√≥n muscular, saciedad y metabolismo saludable."));
        else if (porcentajeProteinas > 30 && porcentajeProteinas <= 40)
            recomendaciones.Add(("‚ö†Ô∏è", $"Alto en prote√≠nas ({proteinasGramos:F1}g, {porcentajeProteinas:F0}%). Aunque es √∫til para deportistas o p√©rdida de peso, aseg√∫rate de mantener buena hidrataci√≥n y no excluir otros nutrientes importantes."));
        else
            recomendaciones.Add(("üö®", $"Prote√≠nas excesivas ({proteinasGramos:F1}g, {porcentajeProteinas:F0}%). M√°s del 40% puede sobrecargar ri√±ones y desplazar carbohidratos y grasas saludables. Balancea mejor tu men√∫."));

        // An√°lisis detallado de CARBOHIDRATOS
        var carbohidratosGramos = totalCarbohidratos;
        if (porcentajeCarbohidratos < 30)
            recomendaciones.Add(("üçû", $"Muy bajo en carbohidratos ({carbohidratosGramos:F1}g, {porcentajeCarbohidratos:F0}%). Esto puede afectar tu energ√≠a. Se recomienda 45-65% de las calor√≠as. Agrega: arroz integral, avena, frutas, papa dulce, pan integral o pasta de trigo entero."));
        else if (porcentajeCarbohidratos >= 30 && porcentajeCarbohidratos < 45)
            recomendaciones.Add(("üçû", $"Bajo en carbohidratos ({carbohidratosGramos:F1}g, {porcentajeCarbohidratos:F0}%). Est√° bien si sigues una dieta baja en carbos, pero considera agregar frutas y cereales integrales para m√°s fibra y energ√≠a sostenida."));
        else if (porcentajeCarbohidratos >= 45 && porcentajeCarbohidratos <= 65)
            recomendaciones.Add(("‚úÖ", $"Excelente aporte de carbohidratos: {carbohidratosGramos:F1}g ({porcentajeCarbohidratos:F0}%). Este rango (45-65%) proporciona energ√≠a √≥ptima para el cerebro, m√∫sculos y actividades diarias."));
        else if (porcentajeCarbohidratos > 65 && porcentajeCarbohidratos <= 75)
            recomendaciones.Add(("‚ö†Ô∏è", $"Alto en carbohidratos ({carbohidratosGramos:F1}g, {porcentajeCarbohidratos:F0}%). Puede ser adecuado para atletas de resistencia, pero para la mayor√≠a, considera reducir porciones de harinas y az√∫cares, e incrementar prote√≠nas."));
        else
            recomendaciones.Add(("üö®", $"Carbohidratos excesivos ({carbohidratosGramos:F1}g, {porcentajeCarbohidratos:F0}%). M√°s del 75% puede elevar glucosa en sangre y promover almacenamiento de grasa. Reduce harinas refinadas y az√∫cares, aumenta prote√≠nas y vegetales."));

        // An√°lisis detallado de GRASAS
        var grasasGramos = totalGrasas;
        if (porcentajeGrasas < 15)
            recomendaciones.Add(("ü•ë", $"Muy bajo en grasas ({grasasGramos:F1}g, {porcentajeGrasas:F0}%). Las grasas son esenciales para absorci√≥n de vitaminas y salud hormonal. Se recomienda 20-35%. Agrega: aguacate, aceite de oliva, frutos secos, semillas de ch√≠a o salm√≥n."));
        else if (porcentajeGrasas >= 15 && porcentajeGrasas < 20)
            recomendaciones.Add(("ü•ë", $"Bajo en grasas ({grasasGramos:F1}g, {porcentajeGrasas:F0}%). Considera incrementar con grasas saludables: aceite de oliva extra virgen, nueces, almendras, semillas de linaza o pescados grasos."));
        else if (porcentajeGrasas >= 20 && porcentajeGrasas <= 35)
            recomendaciones.Add(("‚úÖ", $"Balance ideal de grasas: {grasasGramos:F1}g ({porcentajeGrasas:F0}%). Este rango (20-35%) es perfecto para salud cardiovascular, cerebral y hormonal cuando provienen de fuentes saludables."));
        else if (porcentajeGrasas > 35 && porcentajeGrasas <= 45)
            recomendaciones.Add(("‚ö†Ô∏è", $"Alto en grasas ({grasasGramos:F1}g, {porcentajeGrasas:F0}%). Puede ser apropiado en dietas cetog√©nicas, pero aseg√∫rate de que sean grasas saludables (aguacate, pescado, nueces) y no saturadas o trans."));
        else
            recomendaciones.Add(("üö®", $"Grasas excesivas ({grasasGramos:F1}g, {porcentajeGrasas:F0}%). M√°s del 45% puede elevar colesterol y calor√≠as totales. Reduce alimentos fritos, mantequilla y embutidos. Prefiere fuentes saludables en cantidades moderadas."));

        // An√°lisis de VARIEDAD de alimentos
        if (cantidadAlimentos == 1)
            recomendaciones.Add(("üåà", "Solo hay 1 alimento en este men√∫. Una alimentaci√≥n saludable requiere VARIEDAD de nutrientes. Agrega al menos 4-6 alimentos diferentes: prote√≠na, cereales, frutas, vegetales y grasas saludables."));
        else if (cantidadAlimentos == 2)
            recomendaciones.Add(("üåà", $"Con solo {cantidadAlimentos} alimentos, este men√∫ carece de variedad. Se recomienda incluir al menos 5 grupos de alimentos diferentes para obtener vitaminas, minerales y antioxidantes diversos."));
        else if (cantidadAlimentos >= 3 && cantidadAlimentos < 5)
            recomendaciones.Add(("üåà", $"Variedad aceptable con {cantidadAlimentos} alimentos, pero puede mejorarse. Intenta incluir: 1 prote√≠na, 1 cereal integral, 2 vegetales, 1 fruta y 1 fuente de grasa saludable para maximizar nutrientes."));
        else if (cantidadAlimentos >= 5 && cantidadAlimentos <= 7)
            recomendaciones.Add(("‚úÖ", $"Excelente variedad con {cantidadAlimentos} alimentos. Esta diversidad asegura un amplio espectro de vitaminas, minerales, fibra y antioxidantes esenciales para una salud √≥ptima."));
        else
            recomendaciones.Add(("üåü", $"¬°Sobresaliente! {cantidadAlimentos} alimentos diferentes proporcionan una riqueza nutricional excepcional. Mant√©n esta variedad para obtener todos los nutrientes que tu cuerpo necesita."));

        // Recomendaci√≥n GENERAL basada en el balance global
        var desbalance = "";
        if (porcentajeProteinas < 15 && porcentajeCarbohidratos > 65)
            desbalance = "Tu men√∫ tiene exceso de carbohidratos y d√©ficit de prote√≠nas. Esto puede causar picos de az√∫car en sangre y poca saciedad. ACCI√ìN: Reemplaza una porci√≥n de pan/arroz por pollo, pescado o legumbres.";
        else if (porcentajeProteinas > 35 && porcentajeCarbohidratos < 30)
            desbalance = "Men√∫ muy alto en prote√≠nas y bajo en carbohidratos. Puede ser √∫til para p√©rdida de peso a corto plazo, pero aseg√∫rate de incluir frutas y vegetales para fibra y micronutrientes.";
        else if (porcentajeGrasas > 40 && porcentajeProteinas < 20)
            desbalance = "Alto en grasas y bajo en prote√≠nas. Aunque las grasas saludables son importantes, necesitas m√°s prote√≠na para mantener masa muscular. Agrega huevos, pescado o yogurt griego.";

        if (!string.IsNullOrEmpty(desbalance))
            recomendaciones.Add(("üí°", $"CONSEJO CLAVE: {desbalance}"));

        return recomendaciones;
    }
}
<style>
    :root {
        --color-light-green: #BCD09F;
        --color-dark-green: #576E40;
        --color-dark-brown: #221C04;
        --color-orange-brown: #C2854C;
        --color-cream: #F1EAC0;
        --color-grey-dark: #3c3c3c;
    }

    .page-wrapper {
        background-color: var(--color-cream);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
    }

    .app-header {
        width: 100%;
    }

    .header-band-main {
        background-color: var(--color-dark-green);
        padding: 1.5rem 2rem;
        text-align: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .header-title {
        color: var(--color-cream);
        font-weight: 700;
        margin: 0;
        font-size: 2.2rem;
        text-shadow: 1px 1px 2px var(--color-dark-brown);
    }

    .header-subtitle {
        color: var(--color-light-green);
        margin: 0.25rem 0 0;
        font-size: 1.1rem;
    }

    .icon-emoji {
        font-size: 1.5em;
        vertical-align: middle;
        margin-right: 0.5rem;
    }

    .header-band-bottom {
        height: 10px;
        background-color: var(--color-orange-brown);
    }

    .app-footer {
        width: 100%;
        margin-top: auto;
    }

    .footer-band-top {
        height: 10px;
        background-color: var(--color-orange-brown);
    }

    .footer-band-main {
        background-color: var(--color-light-green);
        padding: 1.5rem 2rem;
        text-align: center;
    }

    .footer-band-main p {
        color: var(--color-dark-brown);
        margin: 0;
        font-size: 1rem;
    }

    .footer-icon {
        font-size: 1.2em;
    }

    .resumen-container {
        flex-grow: 1;
        padding: 2rem;
    }

    .loading-section, .error-section {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 60vh;
        gap: 1rem;
    }

    .loading-text, .error-text {
        font-size: 1.3rem;
        color: var(--color-dark-green);
    }

    .resumen-header {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
    }

    .resumen-title {
        color: var(--color-dark-green);
        font-size: 2rem;
        font-weight: 700;
        margin: 0;
    }

    .resumen-fecha {
        color: var(--color-orange-brown);
        font-size: 1.1rem;
        margin: 0.5rem 0 0 0;
        font-weight: 600;
    }

    .btn-back, .btn-back-header {
        background-color: var(--color-dark-green);
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 6px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s;
        display: inline-block;
    }

    .btn-back:hover, .btn-back-header:hover {
        background-color: var(--color-dark-brown);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    .resumen-content {
        max-width: 1200px;
        margin: 0 auto;
    }

    .totales-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .total-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .card-icon {
        font-size: 3rem;
    }

    .card-content {
        display: flex;
        flex-direction: column;
    }

    .card-label {
        font-size: 0.9rem;
        color: #666;
        font-weight: 500;
    }

    .card-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--color-dark-green);
    }

    .card-unit {
        font-size: 0.85rem;
        color: #888;
    }

    .analisis-section, .alimentos-section, .recomendaciones-section {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .section-title {
        color: var(--color-dark-green);
        font-size: 1.5rem;
        font-weight: 700;
        margin: 0 0 1.5rem 0;
        padding-bottom: 0.75rem;
        border-bottom: 3px solid var(--color-light-green);
    }

    .analisis-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
    }

    .analisis-card {
        background: var(--color-cream);
        border-radius: 8px;
        padding: 1.5rem;
        border-left: 4px solid var(--color-dark-green);
    }

    .analisis-card h4 {
        color: var(--color-dark-green);
        margin: 0 0 1rem 0;
        font-size: 1.1rem;
    }

    .analisis-valor {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--color-orange-brown);
        margin: 0.5rem 0;
    }

    .analisis-descripcion {
        color: #666;
        margin: 0.5rem 0 0 0;
        font-size: 0.95rem;
    }

    .nivel-bajo { border-left-color: #f39c12; }
    .nivel-moderado { border-left-color: #27ae60; }
    .nivel-alto { border-left-color: #e74c3c; }

    .table-wrapper {
        overflow-x: auto;
    }

    .alimentos-table {
        width: 100%;
        border-collapse: collapse;
    }

    .alimentos-table thead th {
        background-color: var(--color-dark-green);
        color: white;
        padding: 1rem;
        text-align: left;
        font-weight: 600;
    }

    .alimentos-table tbody tr {
        border-bottom: 1px solid #e0e0e0;
    }

    .alimentos-table tbody tr:hover {
        background-color: var(--color-cream);
    }

    .alimentos-table tbody td {
        padding: 1rem;
    }

    .alimento-nombre {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 600;
        color: var(--color-dark-brown);
    }

    .emoji-food {
        font-size: 1.3rem;
    }

    .text-center {
        text-align: center;
    }

    .recomendaciones-content {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .recomendacion-item {
        display: flex;
        align-items: flex-start;
        gap: 1rem;
        padding: 1rem;
        background: var(--color-cream);
        border-radius: 8px;
        border-left: 4px solid var(--color-orange-brown);
    }

    .recomendacion-icon {
        font-size: 1.5rem;
    }

    .recomendacion-item p {
        margin: 0;
        color: var(--color-dark-brown);
        line-height: 1.6;
    }
</style>